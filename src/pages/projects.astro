---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import { siteConfig } from "../config/site";
import ProjectCard from "../components/cards/ProjectCard.astro";

const projects = (await getCollection("projects")).sort((a, b) => {
  const dateA = a.data.date ? new Date(a.data.date).valueOf() : 0;
  const dateB = b.data.date ? new Date(b.data.date).valueOf() : 0;
  return dateB - dateA;
});
const { title, description } = siteConfig.sections.projects;
---

<Layout title={title} description={description}>
  {
    projects.map((project) => (
      <ProjectCard
        title={project.data.title}
        description={project.data.description}
        href={`/projects/${project.slug}/`}
        skills={project.data.skills}
      />
    ))
  }
</Layout>
